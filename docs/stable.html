<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.552">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The pmtables Book - 2&nbsp; stable</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./panel.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #0082b4;
      }
</style>


<meta property="og:title" content="The pmtables Book - 2&nbsp; stable">
<meta property="og:description" content="Latex tables for pharmacometrics.">
<meta property="og:image" content="https://metrumresearchgroup.github.io/pmt-book/pmt-hex.png">
<meta property="og:site_name" content="The pmtables Book">
<meta name="twitter:title" content="The pmtables Book - 2&nbsp; stable">
<meta name="twitter:description" content="Latex tables for pharmacometrics.">
<meta name="twitter:image" content="https://metrumresearchgroup.github.io/pmt-book/pmt-hex.png">
<meta name="twitter:creator" content="@kylebtwin">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">The pmtables Book</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-related" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Related</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-related">    
        <li>
    <a class="dropdown-item" href="https://metrumresearchgroup.github.io/pmp-book">
 <span class="dropdown-text">pmplots</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://metrumresearchgroup.github.io/ysp-book">
 <span class="dropdown-text">yspec</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://metrumresearchgroup.github.io/pmtables"> <i class="bi bi-book" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://metrumrg.com"> <i class="bi bi-globe2" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <a href="https://github.com/metrumresearchgroup/pmt-book" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./stable.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">stable</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">stable</span></h1>
            <p class="subtitle lead">Create a simple table from a data frame.</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stable.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">stable</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./panel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Panel</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spanners.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Spanners</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longtable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Longtable</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pipe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pipe interface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Preview</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sanitize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Sanitize</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Glossary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pmtable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">pmtable</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#syntax" id="toc-syntax" class="nav-link active" data-scroll-target="#syntax"><span class="header-section-number">2.1</span> Syntax</a></li>
  <li><a href="#basics" id="toc-basics" class="nav-link" data-scroll-target="#basics"><span class="header-section-number">2.2</span> Basics</a></li>
  <li><a href="#annotate-with-file-names" id="toc-annotate-with-file-names" class="nav-link" data-scroll-target="#annotate-with-file-names"><span class="header-section-number">2.3</span> Annotate with file names</a></li>
  <li><a href="#saving-your-stable" id="toc-saving-your-stable" class="nav-link" data-scroll-target="#saving-your-stable"><span class="header-section-number">2.4</span> Saving your stable</a></li>
  <li><a href="#align-columns" id="toc-align-columns" class="nav-link" data-scroll-target="#align-columns"><span class="header-section-number">2.5</span> Align columns</a>
  <ul class="collapse">
  <li><a href="#fixed-column-widths" id="toc-fixed-column-widths" class="nav-link" data-scroll-target="#fixed-column-widths"><span class="header-section-number">2.5.1</span> Fixed column widths</a></li>
  </ul></li>
  <li><a href="#manipulating-columns-and-names" id="toc-manipulating-columns-and-names" class="nav-link" data-scroll-target="#manipulating-columns-and-names"><span class="header-section-number">2.6</span> Manipulating columns and names</a>
  <ul class="collapse">
  <li><a href="#rename-columns" id="toc-rename-columns" class="nav-link" data-scroll-target="#rename-columns"><span class="header-section-number">2.6.1</span> Rename columns</a></li>
  <li><a href="#hide-a-column-name" id="toc-hide-a-column-name" class="nav-link" data-scroll-target="#hide-a-column-name"><span class="header-section-number">2.6.2</span> Hide a column name</a></li>
  <li><a href="#dont-print-any-table-header-information" id="toc-dont-print-any-table-header-information" class="nav-link" data-scroll-target="#dont-print-any-table-header-information"><span class="header-section-number">2.6.3</span> Don’t print any table header information</a></li>
  <li><a href="#unmask-column-names" id="toc-unmask-column-names" class="nav-link" data-scroll-target="#unmask-column-names"><span class="header-section-number">2.6.4</span> Unmask column names</a></li>
  <li><a href="#make-column-names-bold" id="toc-make-column-names-bold" class="nav-link" data-scroll-target="#make-column-names-bold"><span class="header-section-number">2.6.5</span> Make column names bold</a></li>
  <li><a href="#drop-a-column-from-the-table" id="toc-drop-a-column-from-the-table" class="nav-link" data-scroll-target="#drop-a-column-from-the-table"><span class="header-section-number">2.6.6</span> Drop a column from the table</a></li>
  </ul></li>
  <li><a href="#other-customizations" id="toc-other-customizations" class="nav-link" data-scroll-target="#other-customizations"><span class="header-section-number">2.7</span> Other customizations</a>
  <ul class="collapse">
  <li><a href="#notes" id="toc-notes" class="nav-link" data-scroll-target="#notes"><span class="header-section-number">2.7.1</span> Notes</a></li>
  <li><a href="#units" id="toc-units" class="nav-link" data-scroll-target="#units"><span class="header-section-number">2.7.2</span> Units</a></li>
  <li><a href="#multi-line-column-headers" id="toc-multi-line-column-headers" class="nav-link" data-scroll-target="#multi-line-column-headers"><span class="header-section-number">2.7.3</span> Multi-line column headers</a></li>
  <li><a href="#insert-horizontal-lines" id="toc-insert-horizontal-lines" class="nav-link" data-scroll-target="#insert-horizontal-lines"><span class="header-section-number">2.7.4</span> Insert horizontal lines</a></li>
  <li><a href="#clear-replicate-values" id="toc-clear-replicate-values" class="nav-link" data-scroll-target="#clear-replicate-values"><span class="header-section-number">2.7.5</span> Clear replicate values</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/metrumresearchgroup/pmt-book/blob/main/stable.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/metrumresearchgroup/pmt-book/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="syntax" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="syntax"><span class="header-section-number">2.1</span> Syntax</h2>
<p>Pass your data.frame into <code>stable()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">stable</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Other formal arguments include:</p>
<ul>
<li><strong>align</strong> to set column alignment</li>
<li><strong>panel</strong> to create groups of rows under a “panel” header</li>
<li><strong>span</strong> to group columns under a “spanner” header</li>
<li><strong>notes</strong> to create table notes</li>
<li><strong>sumrows</strong> to insert summary rows</li>
<li><strong>units</strong> that get placed below the corresponding column name</li>
<li><strong>drop</strong> to omit certain columns from the table</li>
<li><strong>sizes</strong> to set different table size attributes</li>
<li><strong>escape_fun</strong> a function to sanitize table items</li>
</ul>
<p>You can also pass a bunch of other arguments through <code>...</code> to further format the table (see <code>?stable</code> for details)</p>
</section>
<section id="basics" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="basics"><span class="header-section-number">2.2</span> Basics</h2>
<p><code>stable()</code> is the name of the workhorse function that is used to turn data.frames into <code>TeX</code> tables. This chapter will introduce the <code>stable()</code> function and how to us it to create basic tables.</p>
<p>To illustrate usage and features of <code>stable()</code>, we will use the <code>stdata</code> data set that comes with pmtables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>data <span class="ot">&lt;-</span> <span class="fu">stdata</span>()</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">head</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>. # A tibble: 6 × 9
.   STUDY       DOSE   FORM    N     WT    CRCL  AGE   ALB   SCR  
.   &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
. 1 12-DEMO-001 100 mg tablet  80    71.4  104   33.7  4.20  1.06 
. 2 12-DEMO-001 150 mg capsule 16    89.4  122   24.4  4.63  1.12 
. 3 12-DEMO-001 150 mg tablet  48    81.7  104   34.4  3.83  0.910
. 4 12-DEMO-001 150 mg troche  16    94.0  93.2  27.4  4.94  1.25 
. 5 12-DEMO-001 200 mg tablet  64    67.9  100   27.5  4.25  1.10 
. 6 12-DEMO-001 200 mg troche  16    76.6  99.2  22.8  4.54  1.15</code></pre>
</div>
</div>
<p>We can turn this data frame into a <code>TeX</code> table by passing it into <code>stable()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>out <span class="ot">&lt;-</span> <span class="fu">stable</span>(data)</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="fu">head</span>(out, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.  [1] "\\setlength{\\tabcolsep}{5pt} "                                            
.  [2] "\\begin{threeparttable}"                                                   
.  [3] "\\renewcommand{\\arraystretch}{1.3}"                                       
.  [4] "\\begin{tabular}[h]{lllllllll}"                                            
.  [5] "\\hline"                                                                   
.  [6] "STUDY &amp; DOSE &amp; FORM &amp; N &amp; WT &amp; CRCL &amp; AGE &amp; ALB &amp; SCR \\\\"                
.  [7] "\\hline"                                                                   
.  [8] "12-DEMO-001 &amp; 100 mg &amp; tablet &amp; 80 &amp; 71.4 &amp; 104 &amp; 33.7 &amp; 4.20 &amp; 1.06 \\\\" 
.  [9] "12-DEMO-001 &amp; 150 mg &amp; capsule &amp; 16 &amp; 89.4 &amp; 122 &amp; 24.4 &amp; 4.63 &amp; 1.12 \\\\"
. [10] "12-DEMO-001 &amp; 150 mg &amp; tablet &amp; 48 &amp; 81.7 &amp; 104 &amp; 34.4 &amp; 3.83 &amp; 0.910 \\\\"</code></pre>
</div>
</div>
<p>Note that we have shown the raw latex code that is generated by <code>stable()</code>. That is to say: the output from <code>stable()</code> is a character vector of latex code for the table. Note also that this character vector has a special class associated with it: <code>stable</code>. That means we can write functions that recognize this character vector as output from <code>stable()</code> and we can have those functions process the character vector in special ways.</p>
<p>We can render that table in <code>TeX</code> <strong>in the current Rmarkdown document</strong> by passing the text to <code>st_asis()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>out <span class="sc">%&gt;%</span> <span class="fu">st_as_image</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>Remember to only call <code>st_asis()</code> when you are rendering tables inline in an Rmd document. If you are sending table code to a <code>TeX</code> report, then you will save them to a file and then include them into your report.</p>
<p>The remaining sections of this chapter will show you how to modify and enhance this output in the more basic ways. We will implement separate chapters for more complicated table manipulations.</p>
</section>
<section id="annotate-with-file-names" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="annotate-with-file-names"><span class="header-section-number">2.3</span> Annotate with file names</h2>
<p>pmtables can track and annotate your table with the filenames of the R code that generated the table (<code>r_file</code>) as well as the output file where you write the the table <code>.tex</code> code (<code>output_file)</code>.</p>
<p>To have pmtables annotate your table with these file names, pass them in with the <code>r_file</code> and <code>output_file</code> arguments</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>out <span class="ot">&lt;-</span> <span class="fu">stable</span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>  data, </span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="at">r_file =</span> <span class="st">"tables.R"</span>, </span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="at">output_file =</span> <span class="st">"tables.tex"</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When we look at the rendered table, these names will show up as annotations at the bottom of the table</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>out <span class="sc">%&gt;%</span> <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="saving-your-stable" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="saving-your-stable"><span class="header-section-number">2.4</span> Saving your stable</h2>
<p>Saving your stable <strong>can</strong> be as easy as sending it into <code>writeLines()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">writeLines</span>(</span>
<span id="cb9-2"><a href="#cb9-2"></a>  out, </span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="at">con =</span> <span class="fu">tempfile</span>(<span class="at">tmpdir =</span> <span class="st">'.'</span>, <span class="at">fileext =</span> <span class="st">".tex"</span>)</span>
<span id="cb9-4"><a href="#cb9-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But remember that we passed in the <code>output_file</code> argument to <code>stable()</code> and we can use that data to save the table code to the file we named in that argument.</p>
<p>Note that our <code>stable</code> object has another attribute now called <code>stable_file</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">attributes</span>(out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>. $class
. [1] "stable"
. 
. $stable_file
. [1] "tables.tex"</code></pre>
</div>
</div>
<p>This has the value that we passed in as <code>output_file</code>. To save our table to <code>stable_file</code>, we call <code>stable_save()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">stable_save</span>(out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There is a <code>dir</code> argument to <code>stable_save()</code> that we can use to to select the directory where the file will be saved</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">stable_save</span>(out, <span class="at">dir =</span> <span class="fu">tempdir</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And if you look at the default value for <code>dir</code> in <code>?stable_save</code>, you’ll see that this is associated with an option called <code>pmtables.dir</code>; you can set that option to your default output directory and your tables will be saved there until you change that</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">options</span>(<span class="at">pmtables.dir =</span> <span class="fu">tempdir</span>())</span>
<span id="cb14-2"><a href="#cb14-2"></a></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="fu">stable_save</span>(out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="align-columns" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="align-columns"><span class="header-section-number">2.5</span> Align columns</h2>
<p>Use the <code>align</code> argument to align column data to the left, center or right. Use a <code>cols_*</code> function to specify the default alignment for all columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">AB =</span> <span class="dv">1</span>, <span class="at">CDEFGHIJ =</span> <span class="dv">2</span>, <span class="at">KL =</span> <span class="dv">3</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="fu">stable</span>(tmp, <span class="at">align =</span> <span class="fu">cols_center</span>()) <span class="sc">%&gt;%</span> <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>You can pass in exceptions to the default</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">stable</span>(tmp, <span class="at">align =</span> <span class="fu">cols_center</span>(<span class="at">CDEFGHIJ =</span> <span class="st">"r"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>Or you can pass an alignment directive and the columns that are bound by that directive</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">stable</span>(tmp, <span class="at">align =</span> <span class="fu">cols_center</span>(<span class="at">.l =</span> <span class="st">"AB,KL"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>A special directive called <code>.outer</code> lets you specify the alignment of the first and last column in the table. For example, this code puts the first column to the left and the last column to the right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">stable</span>(tmp, <span class="at">align =</span> <span class="fu">cols_center</span>(<span class="at">.outer =</span> <span class="st">"lr"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<section id="fixed-column-widths" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="fixed-column-widths"><span class="header-section-number">2.5.1</span> Fixed column widths</h3>
<p>Use <code>col_ragged(size)</code> to force a column to be a fixed size.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">stable</span>(tmp, <span class="at">align =</span> <span class="fu">cols_center</span>(<span class="at">AB =</span> <span class="fu">col_ragged</span>(<span class="dv">2</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>By default, the unit is <code>cm</code> so that the first column (<code>AB</code>) has a width of 2 cm regardless of the contents.</p>
<p>See <code>cols_align()</code> help topic for more information and argument descriptions.</p>
</section>
</section>
<section id="manipulating-columns-and-names" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="manipulating-columns-and-names"><span class="header-section-number">2.6</span> Manipulating columns and names</h2>
<section id="rename-columns" class="level3" data-number="2.6.1">
<h3 data-number="2.6.1" class="anchored" data-anchor-id="rename-columns"><span class="header-section-number">2.6.1</span> Rename columns</h3>
<p>You can change the name that appears in the rendered table with <code>cols_rename</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">stable</span>(<span class="at">cols_rename =</span> <span class="fu">c</span>(<span class="at">Age =</span> <span class="st">"AGE"</span>, <span class="at">Weight =</span> <span class="st">"WT"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>Note that the rename syntax follows the tidyselect convention of putting the new name on the left and the old name on the right.</p>
</section>
<section id="hide-a-column-name" class="level3" data-number="2.6.2">
<h3 data-number="2.6.2" class="anchored" data-anchor-id="hide-a-column-name"><span class="header-section-number">2.6.2</span> Hide a column name</h3>
<p>You can also “erase” the name of a column in the output</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="fu">stable</span>(<span class="at">cols_blank =</span> <span class="st">"WT,ALB,SCR"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="dont-print-any-table-header-information" class="level3" data-number="2.6.3">
<h3 data-number="2.6.3" class="anchored" data-anchor-id="dont-print-any-table-header-information"><span class="header-section-number">2.6.3</span> Don’t print any table header information</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">stable</span>(<span class="at">cols_omit =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="#cb22-4"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="unmask-column-names" class="level3" data-number="2.6.4">
<h3 data-number="2.6.4" class="anchored" data-anchor-id="unmask-column-names"><span class="header-section-number">2.6.4</span> Unmask column names</h3>
<p>In tibbles, you can’t have duplicate column names. The <code>cols_split</code> argument lets you unmask the names when duplicate names are prefixed with a tag and a delimiter</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a.A =</span> <span class="dv">1</span>, <span class="at">b.A =</span> <span class="dv">2</span>, <span class="at">c.A =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">stable</span>(tmp, <span class="at">cols_split =</span> <span class="st">'.'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="make-column-names-bold" class="level3" data-number="2.6.5">
<h3 data-number="2.6.5" class="anchored" data-anchor-id="make-column-names-bold"><span class="header-section-number">2.6.5</span> Make column names bold</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="fu">stable</span>(<span class="at">cols_bold =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="#cb25-4"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="drop-a-column-from-the-table" class="level3" data-number="2.6.6">
<h3 data-number="2.6.6" class="anchored" data-anchor-id="drop-a-column-from-the-table"><span class="header-section-number">2.6.6</span> Drop a column from the table</h3>
<p>If we want to prevent a column from appearing in the output table (e.g.&nbsp; <code>FORM</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">head</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>. # A tibble: 6 × 9
.   STUDY       DOSE   FORM    N     WT    CRCL  AGE   ALB   SCR  
.   &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
. 1 12-DEMO-001 100 mg tablet  80    71.4  104   33.7  4.20  1.06 
. 2 12-DEMO-001 150 mg capsule 16    89.4  122   24.4  4.63  1.12 
. 3 12-DEMO-001 150 mg tablet  48    81.7  104   34.4  3.83  0.910
. 4 12-DEMO-001 150 mg troche  16    94.0  93.2  27.4  4.94  1.25 
. 5 12-DEMO-001 200 mg tablet  64    67.9  100   27.5  4.25  1.10 
. 6 12-DEMO-001 200 mg troche  16    76.6  99.2  22.8  4.54  1.15</code></pre>
</div>
</div>
<p>list the column name as <code>drop</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">stable</span>(data, <span class="at">drop =</span> <span class="st">"FORM"</span>) <span class="sc">%&gt;%</span> <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>Of course some tidyverse could accomplish the same thing</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>FORM) <span class="sc">%&gt;%</span> <span class="fu">stable</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="other-customizations" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="other-customizations"><span class="header-section-number">2.7</span> Other customizations</h2>
<section id="notes" class="level3" data-number="2.7.1">
<h3 data-number="2.7.1" class="anchored" data-anchor-id="notes"><span class="header-section-number">2.7.1</span> Notes</h3>
<p>Arbitrary notes can get added to any table using the <code>notes</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="fu">stable</span>(<span class="at">notes =</span> <span class="st">"Showing just the first three rows"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a href="#cb30-4"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>The appearance of the notes can be controlled by calling <code>noteconf()</code> and passing the result as <code>note_config</code>. See <code>?tab_notes()</code> for more details.</p>
</section>
<section id="units" class="level3" data-number="2.7.2">
<h3 data-number="2.7.2" class="anchored" data-anchor-id="units"><span class="header-section-number">2.7.2</span> Units</h3>
<p>pmtables can automatically place units underneath the appropriate column. To do this, generate a list with names that match the column names you want to label with units.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>u <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="at">WT =</span> <span class="st">"kg"</span>, <span class="at">CRCL =</span> <span class="st">"ml/min"</span>, <span class="at">AGE =</span> <span class="st">"year"</span>, <span class="at">ALB =</span> <span class="st">"g/dL"</span>, </span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="at">SCR =</span> <span class="st">"mg</span><span class="sc">\\</span><span class="st">%"</span></span>
<span id="cb31-4"><a href="#cb31-4"></a>) <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="sc">~</span><span class="fu">paste0</span>(<span class="st">"("</span>, .x, <span class="st">")"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then pass that list as <code>units</code> to <code>stable()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">stable</span>(data, <span class="at">units =</span> u) <span class="sc">%&gt;%</span> <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="multi-line-column-headers" class="level3" data-number="2.7.3">
<h3 data-number="2.7.3" class="anchored" data-anchor-id="multi-line-column-headers"><span class="header-section-number">2.7.3</span> Multi-line column headers</h3>
<p>If the column header is long, you can break it across multiple lines. By default, use <code>...</code> in the column name</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">tibble</span>(<span class="st">`</span><span class="at">First line ... Second line</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">123456789</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">stable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>The break can be introduced through the rename mechanism</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">stable</span>(<span class="at">cols_rename =</span>  <span class="fu">c</span>(<span class="st">`</span><span class="at">First ... Second</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"a"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>Look at the <code>?tab_cols</code> help topic for the <code>cols_break</code> argument; this lets you change the character sequence used for the break.</p>
</section>
<section id="insert-horizontal-lines" class="level3" data-number="2.7.4">
<h3 data-number="2.7.4" class="anchored" data-anchor-id="insert-horizontal-lines"><span class="header-section-number">2.7.4</span> Insert horizontal lines</h3>
<p>Pass <code>hlines_at</code> to insert horizontal lines above specific rows. This can be either logical vector with the same length as the number of rows in the table or a vector of integers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">stable</span>(<span class="fu">stdata</span>(), <span class="at">hline_at =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>or</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">stable</span>(<span class="fu">stdata</span>(), <span class="at">hline_at =</span> data<span class="sc">$</span>FORM <span class="sc">==</span> <span class="st">"tablet"</span>) <span class="sc">%&gt;%</span> <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>Pass <code>hlines_from</code> to derive hline locations based on non-repeating values in a table column. Notice how this behaves.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">stable</span>(<span class="fu">stdata</span>(), <span class="at">hline_from =</span> <span class="st">"DOSE"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>See the <code>?tab_hlines</code> help topic for more info. See also <code>st_hline()</code> for the pipe equivalent with additional feature.</p>
</section>
<section id="clear-replicate-values" class="level3" data-number="2.7.5">
<h3 data-number="2.7.5" class="anchored" data-anchor-id="clear-replicate-values"><span class="header-section-number">2.7.5</span> Clear replicate values</h3>
<p>You can create groups in a table by “clearing” replicate values</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">stable</span>(<span class="fu">stdata</span>(), <span class="at">clear_reps =</span> <span class="st">"STUDY"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>This can be combined with an hline</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">stable</span>(</span>
<span id="cb39-2"><a href="#cb39-2"></a>  <span class="fu">stdata</span>(), </span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="at">clear_reps =</span> <span class="st">"STUDY"</span>, </span>
<span id="cb39-4"><a href="#cb39-4"></a>  <span class="at">hline_from =</span> <span class="st">"STUDY"</span></span>
<span id="cb39-5"><a href="#cb39-5"></a>) <span class="sc">%&gt;%</span> <span class="fu">st_as_image</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stable_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="878"></p>
</figure>
</div>
</div>
</div>
<p>See <code>?tab_clear_reps</code> for other options, including an option for clearing based on several grouping variables.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Preface">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./panel.html" class="pagination-link" aria-label="Panel">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Panel</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/metrumresearchgroup/pmt-book/blob/main/stable.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/metrumresearchgroup/pmt-book/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>